<div class="dashboard-container">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <h1 class="page-title">Security Dashboard</h1>
    <p class="page-subtitle">Monitor your cloud infrastructure security status and compliance metrics</p>
  </div>

  <!-- Key Metrics Row -->
  <div class="metrics-row">
    <div class="metric-card">
      <div class="metric-icon cloud-icon">‚òÅÔ∏è</div>
      <div class="metric-content">
        <div class="metric-value">{{ totalAccounts || 12 }}</div>
        <div class="metric-label">Cloud Accounts</div>
      </div>
    </div>
    
    <div class="metric-card">
      <div class="metric-icon security-icon">üõ°Ô∏è</div>
      <div class="metric-content">
        <div class="metric-value">{{ securityScore || 85 }}%</div>
        <div class="metric-label">Security Score</div>
      </div>
    </div>
    
    <div class="metric-card">
      <div class="metric-icon scan-icon">üîç</div>
      <div class="metric-content">
        <div class="metric-value">{{ totalScans || 247 }}</div>
        <div class="metric-label">Total Scans</div>
      </div>
    </div>
    
    <div class="metric-card">
      <div class="metric-icon alert-icon">‚ö†Ô∏è</div>
      <div class="metric-content">
        <div class="metric-value">{{ criticalAlerts || 3 }}</div>
        <div class="metric-label">Critical Alerts</div>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="dashboard-grid">
    <!-- Security Overview -->
    <div class="dashboard-card large">
      <div class="card-header">
        <h3 class="card-title">Security Overview</h3>
        <div class="card-actions">
          <button class="btn-secondary" (click)="viewSecurityDetails()">View Details</button>
        </div>
      </div>
      <div class="card-content">
        <div class="security-overview">
          <div class="security-item">
            <span class="security-label">High Risk Resources</span>
            <span class="security-value critical">{{ highRiskResources || 15 }}</span>
          </div>
          <div class="security-item">
            <span class="security-label">Medium Risk Resources</span>
            <span class="security-value warning">{{ mediumRiskResources || 42 }}</span>
          </div>
          <div class="security-item">
            <span class="security-label">Compliant Resources</span>
            <span class="security-value success">{{ compliantResources || 183 }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="dashboard-card">
      <div class="card-header">
        <h3 class="card-title">Recent Scan Activity</h3>
      </div>
      <div class="card-content">
        <div class="activity-list">
          <div class="activity-item" *ngFor="let activity of recentActivities">
            <div class="activity-icon">üîç</div>
            <div class="activity-content">
              <div class="activity-title">{{ activity.title }}</div>
              <div class="activity-time">{{ activity.time }}</div>
            </div>
            <div class="activity-status" [class]="activity.status">
              {{ activity.result }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cloud Providers -->
    <div class="dashboard-card">
      <div class="card-header">
        <h3 class="card-title">Cloud Providers</h3>
        <div class="card-actions">
          <button class="btn-primary" routerLink="/cloud-accounts">Manage</button>
        </div>
      </div>
      <div class="card-content">
        <div class="provider-list">
          <div class="provider-item" *ngFor="let provider of cloudProviders">
            <div class="provider-icon">{{ provider.icon }}</div>
            <div class="provider-content">
              <div class="provider-name">{{ provider.name }}</div>
              <div class="provider-accounts">{{ provider.accounts }} accounts</div>
            </div>
            <div class="provider-status" [class]="provider.status">
              {{ provider.status }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Compliance Status -->
    <div class="dashboard-card">
      <div class="card-header">
        <h3 class="card-title">Compliance Status</h3>
        <div class="card-actions">
          <button class="btn-secondary" routerLink="/compliance">View Rules</button>
        </div>
      </div>
      <div class="card-content">
        <div class="compliance-overview">
          <div class="compliance-circle">
            <div class="circle-content">
              <div class="circle-percentage">{{ complianceScore || 78 }}%</div>
              <div class="circle-label">Compliant</div>
            </div>
          </div>
          <div class="compliance-details">
            <div class="compliance-item">
              <span class="compliance-framework">CIS Controls</span>
              <span class="compliance-score">85%</span>
            </div>
            <div class="compliance-item">
              <span class="compliance-framework">SOC 2</span>
              <span class="compliance-score">72%</span>
            </div>
            <div class="compliance-item">
              <span class="compliance-framework">ISO 27001</span>
              <span class="compliance-score">68%</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="dashboard-card">
      <div class="card-header">
        <h3 class="card-title">Quick Actions</h3>
      </div>
      <div class="card-content">
        <div class="quick-actions">
          <button class="action-btn" routerLink="/vulnerabilities">
            <div class="action-icon">üîç</div>
            <div class="action-text">Run Security Scan</div>
          </button>
          <button class="action-btn" routerLink="/cloud-accounts">
            <div class="action-icon">‚ûï</div>
            <div class="action-text">Add Cloud Account</div>
          </button>
          <button class="action-btn" routerLink="/reports">
            <div class="action-icon">üìä</div>
            <div class="action-text">Generate Report</div>
          </button>
          <button class="action-btn" routerLink="/settings">
            <div class="action-icon">‚öôÔ∏è</div>
            <div class="action-text">Configure Rules</div>
          </button>
        </div>
      </div>
    </div>

    <!-- Security Trends -->
    <div class="dashboard-card large">
      <div class="card-header">
        <h3 class="card-title">Security Trends (Last 30 Days)</h3>
        <div class="card-actions">
          <select class="filter-select">
            <option value="30">Last 30 Days</option>
            <option value="7">Last 7 Days</option>
            <option value="90">Last 90 Days</option>
          </select>
        </div>
      </div>
      <div class="card-content">
        <div class="trends-placeholder">
          <div class="chart-placeholder">
            üìà Security trends chart would be displayed here
            <br><br>
            <small>Integration with charting library (Chart.js, D3.js, etc.) would show:</small>
            <ul>
              <li>Security score over time</li>
              <li>Vulnerability detection trends</li>
              <li>Compliance score progression</li>
              <li>Resource scan frequency</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Security Details Modal -->
  <div class="modal-overlay" *ngIf="showSecurityDetailsModal" (click)="closeSecurityDetailsModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Security Overview Details</h3>
        <button class="close-btn" (click)="closeSecurityDetailsModal()">
          <i class="icon-close">‚úï</i>
        </button>
      </div>
      
      <div class="modal-body">
        <!-- High Risk Resources -->
        <div class="detail-section">
          <div class="section-header">
            <h4 class="section-title critical">
              <span class="section-icon">üî¥</span>
              High Risk Resources ({{ highRiskResources || 15 }})
            </h4>
          </div>
          <div class="resource-list">
            <div class="resource-item critical" *ngFor="let resource of securityDetails.highRiskResources">
              <div class="resource-info">
                <div class="resource-name">{{ resource.name }}</div>
                <div class="resource-meta">
                  <span class="resource-provider">{{ resource.provider }}</span>
                  <span class="resource-region">{{ resource.region }}</span>
                </div>
              </div>
              <div class="resource-issue">
                <span class="issue-badge critical">{{ resource.issue }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Medium Risk Resources -->
        <div class="detail-section">
          <div class="section-header">
            <h4 class="section-title warning">
              <span class="section-icon">üü°</span>
              Medium Risk Resources ({{ mediumRiskResources || 42 }})
            </h4>
          </div>
          <div class="resource-list">
            <div class="resource-item warning" *ngFor="let resource of securityDetails.mediumRiskResources">
              <div class="resource-info">
                <div class="resource-name">{{ resource.name }}</div>
                <div class="resource-meta">
                  <span class="resource-provider">{{ resource.provider }}</span>
                  <span class="resource-region">{{ resource.region }}</span>
                </div>
              </div>
              <div class="resource-issue">
                <span class="issue-badge warning">{{ resource.issue }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Compliant Resources -->
        <div class="detail-section">
          <div class="section-header">
            <h4 class="section-title success">
              <span class="section-icon">üü¢</span>
              Compliant Resources ({{ compliantResources || 183 }})
            </h4>
          </div>
          <div class="resource-list">
            <div class="resource-item success" *ngFor="let resource of securityDetails.compliantResources">
              <div class="resource-info">
                <div class="resource-name">{{ resource.name }}</div>
                <div class="resource-meta">
                  <span class="resource-provider">{{ resource.provider }}</span>
                  <span class="resource-region">{{ resource.region }}</span>
                </div>
              </div>
              <div class="resource-issue">
                <span class="issue-badge success">{{ resource.status }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn-primary" (click)="closeSecurityDetailsModal()">Close</button>
        <button class="btn-secondary" routerLink="/vulnerabilities" (click)="closeSecurityDetailsModal()">
          View All Vulnerabilities
        </button>
      </div>
    </div>
  </div>
</div>